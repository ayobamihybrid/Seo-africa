"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[528],{7528:(t,e,o)=>{o.d(e,{Iz:()=>n,f5:()=>c});let r="https://seo-cms.hyphen.digital/api";async function a(t){let e,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e3;for(let n=1;n<=r;n++)try{console.log("\uD83D\uDD04 Attempt ".concat(n,"/").concat(r," for ").concat(t));let e=await fetch(t,{...o,signal:AbortSignal.timeout(5e3*n)});if(e.ok)return console.log("✅ Success on attempt ".concat(n)),e;throw Error("HTTP ".concat(e.status,": ").concat(e.statusText))}catch(t){if(e=t instanceof Error?t:Error(String(t)),console.warn("❌ Attempt ".concat(n," failed:"),e.message),e.message.includes("404")||e.message.includes("403"))break;n<r&&(console.log("⏳ Waiting ".concat(a,"ms before retry...")),await new Promise(t=>setTimeout(t,a)),a*=1.5)}throw e}function n(t){var e,o;if(null==t||null==(o=t.data)||null==(e=o.attributes)?void 0:e.url){let e=t.data.attributes.url;return e.startsWith("http")?e:"".concat(r).concat(e)}if(null==t?void 0:t.url){let e=t.url;return e.startsWith("http")?e:"".concat(r).concat(e)}return"string"==typeof t?t.startsWith("http")?t:"".concat(r).concat(t):(console.warn("⚠️ No image data provided or unrecognized format:",t),"")}async function c(t){try{let e="".concat(r,"/programmes?pLevel=4&filters[slug]=").concat(t);console.log("Fetching programme by slug from:",e);let o=await a(e,{headers:{"Content-Type":"application/json","User-Agent":"NextJS-Server"}},3,1e3),n=await o.json();if(console.log("✅ Programme by slug API response received",n),!n.data||0===n.data.length)throw Error("No programme found with the provided slug");return n.data[0]}catch(e){let t=e instanceof Error?e.message:"string"==typeof e?e:"An unknown error occurred";throw console.error("Failed to fetch programme by slug:",t),Error("Unable to fetch programme by slug from Strapi: ".concat(t))}}}}]);